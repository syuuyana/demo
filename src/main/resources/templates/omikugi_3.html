<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
	<head>
		<meta charset="UTF-8">
		<title>Beppu Hatto｜立地</title>
		
		 <!-- import Vue.js, javascript, css before Element UI-->
		<script th:src="@{/webjars/vue/2.5.3-1/vue.js}"></script>
    	<script th:src="@{/webjars/element-ui/2.0.8/lib/index.js}"></script>
    	<script th:src="@{/webjars/element-ui/2.0.8/lib/umd/locale/ja.js}"></script> <!-- 日本語訳用パッケージ  -->
    	<script th:src="@{/webjars/jquery/3.2.1/jquery.min.js}"></script>
    	<link rel="stylesheet" th:href="@{/webjars/element-ui/2.0.8/lib/theme-chalk/index.css}" />
    	
    	<link rel="preconnect" href="https://fonts.googleapis.com">
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
		<link href="https://fonts.googleapis.com/css2?family=Courgette&family=Zen+Maru+Gothic&display=swap" rel="stylesheet">
    	
		<link rel="stylesheet" th:href="@{/css/style.css}" />
	</head>
	<body>
		<div id="app">
	     		<el-container>
            		<el-header>
	            		<div class="mt-20">
	            			<a th:href="@{'/'}"><img th:src="@{/image/onsen.png}" width="20px" height="20px" /></a>
			            	<a th:href="@{'/'}" class="title"><span class="bad_script">Beppu Hatto</span></a>
	            		</div>
	            	</el-header>
	        	</el-container>
	        	<el-container>
       				<el-main>
       					<div class="q1_1" v-if="qFlg == 1">
       						<div class="question">
       							<h1>この中からお好きな地域の温泉を選んでください。</h1>
       						</div>
       						<div class="click mt-50">
       							<div class="img mr-10" style="display: inline-block;" @click="click(1); counterQuestion()">
			                        <span>別府</span>
			                    </div>
			                    <div class="img ml-10" style="display: inline-block;" @click="click(2); counterQuestion()">
			                        <span>浜脇</span>
			                    </div>
			                    <div class="img ml-10" style="display: inline-block;" @click="click(3); counterQuestion()">
			                        <span>観海寺</span>
			                    </div>
       							<div class="img mr-10" style="display: inline-block;" @click="click(4); counterQuestion()">
			                        <span>堀田</span>
			                    </div>
			                    <div class="img ml-10" style="display: inline-block;" @click="click(5); counterQuestion()">
			                        <span>明礬</span>
			                    </div>
			                    <div class="img ml-10" style="display: inline-block;" @click="click(6); counterQuestion()">
			                        <span>鉄輪</span>
			                    </div>
       							<div class="img mr-10" style="display: inline-block;" @click="click(7); counterQuestion()">
			                        <span>柴石</span>
			                    </div>
			                    <div class="img ml-10" style="display: inline-block;" @click="click(8); counterQuestion()">
			                        <span>亀川</span>
			                    </div>
       						</div>
       					</div>
       					<div class="loading" v-if="qFlg == 2">
       						<div class="question">
       							<h1>只今処理中です。</h1>
       							<h1>処理が終了するまで、しばらくお待ちください。</h1>
       						</div>
       						<div class="click mt-50">
			                    <img th:src="@{/image/mozo.svg}" class="content mt-50" width="100px" height="100px" />
    							<div class="content mt-80">
    								<i class="el-icon-loading"></i>
    							</div>
    							<div class="content mt-50">
	       							<span>ちょっとだけ待ってね。</span>
	       							<button @click="onResultCLick()">次へ</button>
		       					</div>
       						</div>
       					</div>
       				</el-main>
      			</el-container>
	    </div>
	    <script>
		  	ELEMENT.locale(ELEMENT.lang.ja)
		  	let json_dic = {};
		    var ten = new Vue({
		    	el: '#app',
		    	data: {
		            qFlg: 1,
		            yesFlg: false,
		            noFlg: false,
		        },
		        methods: {
		        		click: function(value) {
		        			json_dic['category'] = value;
		        			$.ajax({
		        				url: 'action/three/pull',  // thisの更新対策(scopeでは別処理)
		        				type: 'post',
		        				data: JSON.stringify(json_dic),
		        				contentType: 'application/json'
		        			}).then(
		        				function(response) {
		        					window.location.href = "result_dic";
		        					this.yesFlg = true;
		        					this.noFlg = false;
		        				},
		        				function () {
		        					this.yesFlg = false;
		        					this.noFlg = true;
		        				}
		        			);
		        		},// ここでajaxの非同期通信を終了
			        	onMainCardCLick: function () {
			                window.location.href = "index";
			            },
			            onResultCLick: function () {
			                window.location.href = "result";
			            },
			            counterQuestion: function() {
			            	this.qFlg = this.qFlg + 1;
			            }
		         },
		         name: 'Dictionary',
		    });
		</script>
	    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.8.0/gsap.min.js"></script>
	 </body>
</html>